<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbit | Authentication</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d1117; color: white; font-family: sans-serif; }
        .custom-input { background: #0d1117; border: 1px solid rgba(255,255,255,0.05); outline: none; transition: 0.2s; }
        .custom-input:focus { border-color: #3b82f6; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md p-8 bg-[#161b22] border border-white/10 rounded-[2.5rem] text-center shadow-2xl">
        <img src="/static/img/logo.svg" class="w-20 h-20 mx-auto mb-6">
        <h2 id="title" class="text-3xl font-black italic uppercase mb-8 text-blue-500">Orbit Login</h2>

        <form id="auth-form" class="space-y-4">
            <input type="text" name="username" placeholder="Username" required class="w-full p-4 rounded-2xl custom-input">
            <div class="relative">
                <input id="pass-field" type="password" name="password" placeholder="Password" required class="w-full p-4 rounded-2xl custom-input">
                <button type="button" onclick="toggleEye()" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white">
                    <svg id="eye-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
            </div>
            <button type="submit" id="submit-btn" class="w-full p-4 rounded-2xl bg-blue-500 font-bold hover:bg-blue-600 transition-all active:scale-95">Login</button>
        </form>

        <button onclick="switchMode()" id="switch-btn" class="mt-6 text-sm text-gray-500 hover:text-white">Don't have an account? Register</button>
    </div>

    <script>
        let isLogin = true;

        function toggleEye() {
            const f = document.getElementById('pass-field');
            const icon = document.getElementById('eye-icon');
            f.type = f.type === 'password' ? 'text' : 'password';
            icon.style.color = f.type === 'text' ? '#3b82f6' : '';
        }

        function switchMode() {
            isLogin = !isLogin;
            document.getElementById('title').innerText = isLogin ? 'Orbit Login' : 'Orbit Register';
            document.getElementById('submit-btn').innerText = isLogin ? 'Login' : 'Register';
            document.getElementById('switch-btn').innerText = isLogin ? "Don't have an account? Register" : "Already have an account? Login";
        }

        document.getElementById('auth-form').onsubmit = async (e) => {
            e.preventDefault();
            const res = await fetch(isLogin ? '/api/login' : '/api/register', {
                method: 'POST',
                body: new FormData(e.target)
            });
            const data = await res.json();

            if (res.ok) {
                if (isLogin) window.location.href = '/dashboard';
                else { alert('Success: ' + data.message); switchMode(); }
            } else {
                alert('Error: ' + data.message);
            }
        };
    </script>
</body>
</html>